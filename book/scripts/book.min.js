"use strict";function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function init_book_nav_caller(){book_nav=$("nav"),call_nav_button=$(".show-book-nav").find(".menu-item")}function open_book_nav(){book_nav.addClass("shown"),call_nav_button.addClass("active"),$("article").addClass("darker"),is_book_nav_showing=!0}function close_book_nav(){book_nav.removeClass("shown"),call_nav_button.removeClass("active"),$("article").removeClass("darker"),is_book_nav_showing=!1}function toggle_book_nav(){is_book_nav_showing?close_book_nav():open_book_nav()}function adjustAnchor(){var n=$(":target"),e=$("header").outerHeight();n.length>0&&window.scrollTo(0,n.offset().top-e-TOP_MARGIN)}function init_site_menu_caller(){site_menu_caller=$(".show-menu"),vertical_site_menu=$(".site-menu.transformable")}function open_vertical_site_menu(){vertical_site_menu.addClass("shown"),site_menu_caller.addClass("active"),is_site_menu_showing=!0}function close_vertical_site_menu(){vertical_site_menu.removeClass("shown"),site_menu_caller.removeClass("active"),is_site_menu_showing=!1}function toggle_vertical_site_menu(){is_site_menu_showing?close_vertical_site_menu():open_vertical_site_menu()}function disable_touch(){hammer_article&&hammer_article.destroy(),hammer_nav&&hammer_nav.destroy()}function enable_touch(){delete Hammer.defaults.cssProps.userSelect,nav=$("nav"),article=$("article"),nav_width=nav.outerWidth();var n=new Hammer(article.get(0),{dragLockToAxis:!0,dragBlockHorizontal:!0}),e=new Hammer(nav.get(0),{dragLockToAxis:!0,dragBlockHorizontal:!0});n.on("swiperight",function(n){var e=n.changedPointers[0].clientX-n.deltaX;Utils.between(e,0,open_tolerance)&&open_nav()}),e.on("swipeleft",function(){close_nav()}),n.on("panleft panright",function(n){is_opened||(is_moving?(darker_step(),nav_right(n.changedPointers[0].clientX>nav_width?nav_width:n.changedPointers[0].clientX)):Utils.between(n.changedPointers[0].clientX-n.deltaX,0,open_tolerance)&&enable_moving())}),e.on("panleft panright",function(n){n.isFinal||(is_moving?(darker_step(),nav_right(nav_width+n.deltaX>nav_width?nav_width:nav_width+n.deltaX)):enable_moving())}),n.on("panend pancancel",function(){disable_moving(),nav.hasClass("shown")||(nav_right()>nav_width/2?open_nav():close_nav())}),e.on("panend pancancel",function(){disable_moving(),nav.hasClass("shown")&&(nav_right()<nav_width/2?close_nav():open_nav())}),$(".menu-button").click(function(){open_nav()}),$("article, header").click(function(n){!$(n.target).hasClass("menu-button")&&is_opened&&close_nav()})}function open_nav(){clean_nav(),nav.addClass("shown"),article.addClass("darker"),is_opened=!0}function close_nav(){clean_nav(),article.removeClass("darker"),is_opened=!1}function enable_moving(){nav.addClass("moving"),is_moving=!0}function disable_moving(){nav.removeClass("moving"),is_moving=!1}function clean_nav(){article.css("filter",""),nav.removeClass().css("left","")}function darker_step(){var n=1-nav_right()/(2*nav_width);article.css("filter","brightness("+n+")")}function nav_right(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===n){return nav.position().left+nav_width}nav.css("left",n-nav_width+"px")}var _createClass=function(){function n(n,e){for(var a=0;a<e.length;a++){var t=e[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(e,a,t){return a&&n(e.prototype,a),t&&n(e,t),e}}(),is_book_nav_showing=!1,book_nav=void 0,call_nav_button=void 0;$(function(){init_book_nav_caller(),call_nav_button.click(function(){toggle_book_nav()}),$(window).click(function(n){$(n.target).closest(call_nav_button).length||$(n.target).closest("nav").length||close_book_nav()})});var TOP_MARGIN=20;$(window).on("hashchange load",adjustAnchor),$(function(){$("body").on("click","a[href^='#']",function(n){window.location.hash===$(this).attr("href")&&(n.preventDefault(),adjustAnchor())})});var is_site_menu_showing=!1,site_menu_caller=void 0,vertical_site_menu=void 0;$(function(){init_site_menu_caller(),site_menu_caller.click(function(){toggle_vertical_site_menu()}),$(window).click(function(n){$(n.target).closest(".menu-item").length||$(n.target).closest(".show-menu").length||close_vertical_site_menu()})});var is_opened=!1,is_moving=!1,nav=void 0,article=void 0,header=void 0,open_tolerance=20,nav_width=void 0,hammer_article=null,hammer_nav=null;$(window).resize(function(){nav_width=$(nav).outerWidth(),window.matchMedia("(max-width: 850px)").matches?(console.log("ВКЛЮЧАЕМ"),enable_touch()):(console.log("ВЫКЛЮЧАЕМ"),disable_touch())}),$(function(){window.matchMedia("(max-width: 850px)").matches?enable_touch():disable_touch()}),$(function(){});var LAYOUT_WIDTH={MINI:445,MOBILE:650,TABLET:850,STRETCH:1100},Layout=function(){function n(){_classCallCheck(this,n)}return _createClass(n,null,[{key:"is_layout",value:function(n){return window.matchMedia("(max-width: "+n+"px)").matches}}]),n}(),Utils=function(){function n(){_classCallCheck(this,n)}return _createClass(n,null,[{key:"between",value:function(n,e,a){var t=void 0,o=void 0;return e>a?(t=a,o=e):(t=e,o=a),n>=t&&n<=o}}]),n}();